{
  "extends": [
    "config:base",
    "group:allNonMajor",
    ":separateMultipleMajorReleases",
    ":automergeDisabled",
    ":ignoreUnstable",
    ":enableVulnerabilityAlertsWithLabel(security)",
    ":rebaseStalePrs",
    ":prConcurrentLimitNone",
    ":prHourlyLimitNone"
  ],
  "pre-commit": {
    "enabled": true
  },
  "customManagers": [
    {
      "customType": "regex",
      "datasourceTemplate": "npm",
      "fileMatch": ["^.pre-commit-config.yaml$"],
      "matchStrings": [
        "additional_dependencies:\\s*[-\\s]*['\"]?(?<depName>@?[^'\"\\s]+@(?<currentValue>[^'\"\\s]+))['\"]?",
        "additional_dependencies:\\s*\\[\\s*['\"]?(?<depName>@?[^'\"\\s]+@(?<currentValue>[^'\"\\s]+))['\"]?\\s*\\]"
      ]
    }
  ],
  "vulnerabilityAlerts": {
    "labels": ["security-critical", "dependencies"],
    "prPriority": 1,
    "automerge": true,
    "platformAutomerge": true,
    "prCreation": "immediate",
    "stabilityDays": 0,
    "rangeStrategy": "pin",
    "commitMessageSuffix": "[SECURITY]",
    "prBodyTemplate": "Security update to patch vulnerability {{{vulnerabilityUrl}}}\n\nSLA: 3 days\nDeadline: {{{deadline}}}"
  },
  "packageRules": [
    {
      "groupName": "all ci non-major dependencies",
      "groupSlug": "all-ci-minor-patch",
      "matchManagers": ["github-actions", "pre-commit", "docker-compose"],
      "matchUpdateTypes": ["minor", "patch"],
      "automerge": true
    },
    {
      "groupName": "all non-major language versions",
      "groupSlug": "all-language-minor-patch",
      "matchDatasources": [
        "golang-version",
        "gradle-version",
        "java-version",
        "node-version"
      ],
      "matchUpdateTypes": ["minor", "patch"]
    },
    {
      "matchManagers": ["dockerfile"],
      "matchDepTypes": ["final"],
      "matchDatasources": ["docker"],
      "matchPackagePatterns": ["^(debian|ubuntu|alpine|node|python|golang)"],
      "enabled": true,
      "pinDigests": false,
      "labels": ["dependencies", "base-image"],
      "prPriority": 2,
      "automerge": true,
      "platformAutomerge": true,
      "extends": ["schedule:weekly"]
    },
    {
      "matchManagers": ["dockerfile"],
      "matchDepTypes": ["final"],
      "matchCurrentVersion": "/^\\d+\\.\\d+.\\d+$/",
      "matchUpdateTypes": ["patch", "minor"],
      "enabled": true,
      "labels": ["dependencies", "service-deps"],
      "prPriority": 1
    }
  ],
  "hostRules": [
    {
      "matchHost": "docker.io",
      "prePriority": 1
    }
  ],
  "reviewersFromCodeOwners": true,
  "github-actions": {
    "fileMatch": ["(^|/).github/workflows/.+/.+\\.ya?ml$"]
  }
}
